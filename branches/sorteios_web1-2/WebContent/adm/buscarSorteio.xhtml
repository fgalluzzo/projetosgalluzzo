<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<h:head>
	<title></title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link href="recursos/estilo.css" rel="stylesheet" type="text/css"
		media="screen" />
</h:head>
<h:body>
	<ui:composition template="/adm/template/common.xhtml">
		<ui:define name="content">
			<h:form>
				<div class="post">
					<rich:panel  >		
						<f:facet name="header" >
						<h:outputText value="#{msg.buscarSorteio}"/>
					</f:facet>					
					<h:inputText value="#{cadastroSorteioMB.termoBusca}" />
					<h:commandLink action="#{cadastroSorteioMB.buscar}" title="#{msg.buscar}"><img src="recursos/images/lupa.png" /></h:commandLink>
					<div > <h:messages infoClass="messagesInfo"></h:messages> </div>						
						<rich:dataTable rendered="#{cadastroSorteioMB.temResultadoBusca}" rows="10" id="sorteios" value="#{cadastroSorteioMB.sorteios}" var="sorteio">
							<f:facet name="header">
        						
    						</f:facet>
    						<rich:column >
								<f:facet name="header">
									<h:outputText value="#{msg.nome}" />
								</f:facet>
								<h:commandLink action="detalheSorteio" value="#{sorteio.nome}">
									<f:setPropertyActionListener value="#{sorteio}" target="#{cadastroSorteioMB.sorteio}"></f:setPropertyActionListener>
								</h:commandLink>
								
							</rich:column>
							<rich:column sortBy="#{sorteio.dataInicioD}">
								<f:facet name="header">
									<h:outputText value="#{msg.dtHoraInicio}" />
								</f:facet>
								<h:outputText value="#{sorteio.dataInicioD}">
									<f:convertDateTime timeStyle="short" timeZone="America/Sao_Paulo" locale="BR" type="both" ></f:convertDateTime>
								</h:outputText>
							</rich:column>
							<rich:column sortBy="#{sorteio.dataFimD}">
								<f:facet name="header">
									<h:outputText value="#{msg.dtHoraFim}" />
								</f:facet>
								<h:outputText value="#{sorteio.dataFimD}">
									<f:convertDateTime timeStyle="short" timeZone="America/Sao_Paulo" locale="BR"   type="both"   ></f:convertDateTime>
								</h:outputText>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg.inscritos}" />
								</f:facet>
								<h:outputText value="#{sorteio.inscritos}">									
								</h:outputText>
							</rich:column>								
							<rich:column colspan="2">
								<f:facet name="header">
									<h:outputText value="#{msg.opcoes}" />
								</f:facet>
								<h:commandLink action="alterarSorteio" title="#{msg.alterar}" rendered="#{not sorteio.sorteado}">
									<img width="16" height="16" src="recursos/images/alterar.jpg" />
									<f:setPropertyActionListener value="#{sorteio}" target="#{cadastroSorteioMB.sorteio}"></f:setPropertyActionListener>
								</h:commandLink>
								
								<h:commandLink id="sbtLink" action="#{cadastroSorteioMB.excluir}" onclick="if (!confirm('#{msg.desejaExcluirSorteio}')) return false" title="#{msg.excluir}">
									<img width="16" height="16" src="recursos/images/lixeira.png" />
									<f:setPropertyActionListener value="#{sorteio}" target="#{cadastroSorteioMB.sorteio}"></f:setPropertyActionListener>									
								</h:commandLink>
							</rich:column>
							<f:facet name="footer">							
          						<rich:dataScroller  maxPages="3"></rich:dataScroller>
							</f:facet>
						</rich:dataTable>										
						</rich:panel>
						<div style="text-align: right;"><h:link outcome="index">
					<h:outputText value="#{msg.voltar}" />
				</h:link></div>
				</div>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>


</html>